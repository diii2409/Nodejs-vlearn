<h1 class='container'>homepage</h1>
{{! ---------------------------------------------------- }}
<div class='mt-4'>
  <div class="form-check">
    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
    <label class="form-check-label" for="defaultCheck1">
      Select all
    </label>
  </div>
  <div class='row'>

    {{#each parts}}
      <div class='col-sm-6 col-lg-4'>
        <div class='card' style='width: 18rem;'>
          <div class='card-body'>
            <h5 class='card-title'>{{this.name}}</h5>
            <h5 class='card-title'>{{this.tuoi}}</h5>
            <a href='/parts/{{this.slug}}' class='btn btn-primary'>Go detail</a>
            <a
              href='/'
              class='btn btn-primary'
              data-toggle='modal'
              data-id='{{this._id}}'
              data-target='#delete-part-modal'
            >Delete</a>
          </div>
        </div>
      </div>

    {{/each}}
  </div>
</div>

{{! Confirm delelte part}}
<!-- Modal -->
<div
  class='modal fade'
  id='delete-part-modal'
  tabindex='-1'
  role='dialog'
  aria-labelledby='delete-part-modal-title'
  aria-hidden='true'
>
  <div class='modal-dialog' role='document'>
    <div class='modal-content'>
      <div class='modal-header'>
        <h5 class='modal-title' id='delete-part-modal-title'>Confirm</h5>
        <button
          type='button'
          class='close'
          data-dismiss='modal'
          aria-label='Close'
        >
          <span aria-hidden='true'>&times;</span>
        </button>
      </div>
      <div class='modal-body'>
        ...
      </div>
      <div class='modal-footer'>
        <button 
          type='button' 
          class='btn btn-primary'
          id="btn-delete-part"
          >Submit</button>
        <button
          type='button'
          class='btn btn-secondary'
          data-dismiss='modal'
        >Close</button>
      </div>
    </div>
  </div>
</div>
{{!-- Delete hidden form --}}
<form name = 'delete-part-form' method='POST'></form>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    let partID ;
    let deleteForm = document.forms["delete-part-form"];
    // when dialog confirm clicked
    $('#delete-part-modal').on('show.bs.modal', function (event) {
      let button = $(event.relatedTarget);
      partID = button.data('id');
    });
    // when delete part btn clicked
    let btnDeletePart = document.getElementById('btn-delete-part');
    btnDeletePart.addEventListener('click', function() {
      deleteForm.action = 'parts/' + partID + "?_method=DELETE";
      deleteForm.submit();
    });
  });

</script>